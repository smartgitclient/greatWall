<div class="page page-grid" data-ng-controller="CommissionFractionCtrl">
<div class="panel panel-default">
<div class="col-md-5" check-permissions="commissionLimitCreate">
    <div class="panel_r">
        <div class="panel panel-form-list">
            <div class="panel-heading">
                <strong>佣金份數</strong>
                <button class="btn btn-confirm pull-right" data-ng-click="add_fraction()">新增佣金份數</button>
            </div>
            <div class="panel-content">
                <form name="form_commission_fraction" class="ng-valid ng-dirty form-validation" server-validation="{{sub_post}}{{commission_fraction_url}}">
                    <table>
                        <tr height="50">
                            <td width="100" class="text-right">廳會名稱：</td>
                            <td>
                                <select data-ng-model="record.hall_id" class="form-control" name="hall_id" ng-options="h.id as h.hall_name for h in halls">
                                    <option value = "">請選擇廳會</option>
                                </select>
                            </td>
                            <td colspan="2">&nbsp;</td>
                        </tr>
                        <tr height="50">
                            <td class="text-right" width="100">佣金份數：</td>
                            <td width="185">
                                <input type="text"
                                       data-ng-required="enableClientValidation"
                                       name="commission_total"
                                       data-ng-model="record.commission_total"
                                       class="form-control" style="width: 130px;float: left">&nbsp;/&nbsp;份
                            </td>
                            <td class="text-right" width="100">積分份數：</td>
                            <td width="185">
                                <input type="text"
                                       data-ng-required="enableClientValidation"
                                       name="integral_total"
                                       data-ng-model="record.integral_total"
                                       class="form-control" style="width: 130px;float: left">&nbsp;/&nbsp;份
                            </td>
                        </tr>
                        <tr height="50">
                            <td class="text-right">操作密碼：</td>
                            <td><input name="pin_code" type="password" data-ng-model="record.pin_code" class="form-control" style="width: 130px;float: left" data-enter-key="submit()"></td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                    </table>
                    <br><br><br>
                    <div class="row" style="text-align: center;">
                        <button class="btn btn-confirm margin-right-15" ng-click="submit()" data-ng-disabled="disabled_submit">提交</button>
                        <button class="btn btn-cancel" ng-click="reset()" >重置</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

</div>
<div class="panel_l col-md-7">
    <div class="panel">
        <div class="panel-content">

            <div class="panel panel-list-detail">
                <div class="panel-heading">
                </div>
                <div class="panel-content">
                    <table class="table table-bordered table-striped">
                        <thead>
                        <tr>
                            <td width="150">廳會名稱</td>
                            <td>佣金份數</td>
                            <td>積分份數</td>
                            <td width="150" check-permissions="commissionLimitUpdate,commissionLimitDelete">操作</td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr data-ng-repeat="commissionDivide in commissionDivides">
                            <td>{{commissionDivide.hall_name}}</td>
                            <td>{{commissionDivide.commission_total}}</td>
                            <td>{{commissionDivide.integral_total}}</td>
                            <td check-permissions="commissionLimitUpdate,commissionLimitDelete">
                                <button class="btn btn-information btn-table" check-permissions="commissionLimitUpdate" ng-click="update(commissionDivide.id)">修改</button>
                                <button class="btn btn-information btn-table" check-permissions="commissionLimitDelete" ng-click="delete(commissionDivide.id)">刪除</button>
                            </td>
                        </tr>
                        <tr data-ng-show="commissionDivides.length == 0">
                            <td colspan="4">暫無符合條件的記錄</td>
                        </tr>
                        </tbody>
                    </table>
                    <footer class="table-footer">
                        <div class="text-right pagination-container">
                            <pagination class="pagination-sm"
                                        page="pagination.page"
                                        total-items="pagination.total_items"
                                        on-select-page="select(page)"
                                        max-size = "pagination.max_size"
                                        items-per-page = "pagination.items_per_page"
                                        data-ng-hide="pagination.total_items <= pagination.items_per_page"></pagination>
                            <paginationselect pageCtrl="pagination" select-page="select" ></paginationselect>
                        </div>
                    </footer>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>
</div>